

<?php $__env->startSection('title'); ?>
<?php echo e($topic->title); ?>_@parent
<?php $__env->stopSection(); ?>

<?php $__env->startSection('description'); ?>
<?php echo e($topic->excerpt); ?>

<?php $__env->stopSection(); ?>

<?php $__env->startSection('css'); ?>
 <link rel="stylesheet" href="<?php echo cdn('assets/onework_css/layout.css'); ?>">
<?php $__env->stopSection(); ?>
<?php $__env->startSection('content'); ?>

<div class="col-md-9 topics-show main-col">

  <!-- Topic Detial -->
  <div class="topic panel panel-default">
    <div class="infos panel-heading">

      <div class="pull-right avatar_large">
        <a href="<?php echo route('users.show', $topic->user->id); ?>">
          <img src="<?php echo $topic->user->present()->gravatar; ?>" style="width:65px; height:65px;" class="img-thumbnail avatar" />
        </a>
      </div>

      <h1 class="panel-title topic-title"><?php echo e($topic->title); ?></h1>

      <div class="votes">

        <a data-method="post" href="javascript:void(0);" data-url="<?php echo route('topics.upvote', $topic->id); ?>" title="<?php echo lang('Up Vote'); ?>" id="up-vote" class="vote <?php echo $currentUser && $topic->votes()->ByWhom(Auth::id())->WithType('upvote')->count() ? 'active' :'';; ?>">
            <li class="fa fa-chevron-up"></li> <?php echo $topic->vote_count; ?>

        </a>
         &nbsp;
        <a data-method="post" href="javascript:void(0);" data-url="<?php echo route('topics.downvote', $topic->id); ?>" title="<?php echo lang('Down Vote'); ?>" id="down-vote" class="vote <?php echo $currentUser && $topic->votes()->ByWhom(Auth::id())->WithType('downvote')->count() ? 'active' :'';; ?>">
            <li class="fa fa-chevron-down"></li>
        </a>
      </div>

      <?php echo $__env->make('topics.partials.meta', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
    </div>

    <div class="content-body entry-content panel-body">

      <?php echo $__env->make('topics.partials.body', array('body' => $topic->body), array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>

      <?php echo $__env->make('topics.partials.ribbon', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
    </div>

    <?php foreach($topic->appends as $index => $append): ?>

        <div class="appends">
            <span class="meta"><?php echo lang('Append'); ?> <?php echo $index; ?> &nbsp;Â·&nbsp; <abbr title="<?php echo $append->created_at; ?>" class="timeago"><?php echo $append->created_at; ?></abbr></span>
            <div class="sep5"></div>
            <div class="markdown-reply append-content">
                <?php echo $append->content; ?>

            </div>
        </div>

    <?php endforeach; ?>

    <?php echo $__env->make('topics.partials.topic_operate', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
  </div>

  <!-- Reply List -->
  <div class="replies panel panel-default list-panel replies-index">
    <div class="panel-heading">
      <div class="total"><?php echo lang('Total Reply Count'); ?>: <b><?php echo $replies->getTotal(); ?></b> </div>
    </div>

    <div class="panel-body">

      <?php if(count($replies)): ?>
        <?php echo $__env->make('topics.partials.replies', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
      <?php else: ?>
         <div class="empty-block"><?php echo lang('No comments'); ?>~~</div>
      <?php endif; ?>

      <!-- Pager -->
      <div class="pull-right" style="padding-right:20px">
        <?php echo $replies->appends(Request::except('page'))->links();; ?>

      </div>
    </div>
  </div>

  <!-- Reply Box -->
  <div class="reply-box form box-block">

    <?php echo $__env->make('layouts.partials.errors', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>

    <?php echo Form::open(['route' => 'replies.store', 'id' => 'reply-form', 'method' => 'post']); ?>

      <input type="hidden" name="topic_id" value="<?php echo $topic->id; ?>" />

        <?php echo $__env->make('topics.partials.composing_help_block', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>

        <div class="form-group">
            <?php if($currentUser): ?>
              <?php echo Form::textarea('body', null, ['class' => 'form-control',
                                                'rows' => 5,
                                                'placeholder' => lang('Please using markdown.'),
                                                'style' => "overflow:hidden",
                                                'id' => 'reply_content']); ?>

            <?php else: ?>
              <?php echo Form::textarea('body', null, ['class' => 'form-control', 'disabled' => 'disabled', 'rows' => 5, 'placeholder' => lang('User Login Required for commenting.')]); ?>

            <?php endif; ?>
        </div>

        <div class="form-group status-post-submit">

            <?php if($currentUser): ?>
              <?php echo Form::submit(lang('Reply'), ['class' => 'btn btn-primary', 'id' => 'reply-create-submit']); ?>

            <?php else: ?>
              <?php echo Form::submit(lang('Reply'), ['class' => 'btn btn-primary disabled', 'id' => 'reply-create-submit']); ?>

            <?php endif; ?>

            <span class="help-inline" title="Or Command + Enter">Ctrl+Enter</span>
        </div>

        <div class="box preview markdown-reply" id="preview-box" style="display:none;"></div>

    <?php echo Form::close(); ?>

  </div>

</div>

<?php echo $__env->make('layouts.partials.sidebar', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>

<?php $__env->stopSection(); ?>

<?php echo $__env->make('layouts.default', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>